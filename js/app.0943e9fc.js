(function(){"use strict";var t={1629:function(t,a,e){var s={};e.r(s),e.d(s,{A:function(){return N}});var r=e(6848),i=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticStyle:{display:"none"}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("symbol",{attrs:{id:"icon-arrow-left"}},[a("path",{attrs:{fill:"none",d:"M6.319 11.034l-5-5 5-5",stroke:"#222"}})]),a("symbol",{attrs:{id:"icon-arrow-right"}},[a("path",{attrs:{fill:"none",d:"M1.25 11.034l5-5-5-5",stroke:"#222"}})]),a("symbol",{attrs:{id:"icon-arrow",viewBox:"0 0 10 6"}},[a("path",{attrs:{d:"M1 1l4 4 4-4",stroke:"#000","stroke-linecap":"round"}})]),a("symbol",{attrs:{id:"icon-cart",viewBox:"0 0 19 24"}},[a("path",{attrs:{fill:"#000","fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.895.752c-2.6 0-4.779 1.955-4.779 4.45v.684H4.094a2.5 2.5 0 00-2.497 2.372l-.65 12.686a2.5 2.5 0 002.496 2.628h12.903a2.5 2.5 0 002.497-2.628l-.65-12.686a2.5 2.5 0 00-2.497-2.372h-1.023v-.685c0-2.494-2.178-4.45-4.778-4.45zm4.778 8.362a.854.854 0 01-.5 1.55.856.856 0 01-.5-1.55V6.886H6.116v2.228a.855.855 0 01-.5 1.55.856.856 0 01-.5-1.55V6.886H4.094a1.5 1.5 0 00-1.499 1.423l-.65 12.686a1.5 1.5 0 001.498 1.577h12.903a1.5 1.5 0 001.498-1.577l-.65-12.686a1.5 1.5 0 00-1.498-1.423h-1.023v2.228zm-1-3.228v-.685c0-1.868-1.653-3.45-3.778-3.45-2.126 0-3.779 1.582-3.779 3.45v.685h7.557z"}})]),a("symbol",{attrs:{id:"icon-close",viewBox:"0 0 18 18"}},[a("path",{attrs:{d:"M17 1L1 17m16 0L1 1",stroke:"#9D9D9D","stroke-width":".8"}})]),a("symbol",{attrs:{id:"icon-facebook",viewBox:"0 0 17 17"}},[a("path",{attrs:{d:"M15.454 0H1.545C.692 0 0 .692 0 1.545v13.91C0 16.308.692 17 1.545 17h7.728v-6.954H6.955V7.727h2.318V6.482c0-2.356 1.148-3.391 3.107-3.391.938 0 1.434.07 1.669.101V5.41h-1.336c-.831 0-1.122.439-1.122 1.328v.99h2.437l-.33 2.319H11.59V17h3.864c.853 0 1.545-.692 1.545-1.546V1.545A1.544 1.544 0 0015.454 0z"}})]),a("symbol",{attrs:{id:"icon-insta",viewBox:"0 0 17 17"}},[a("path",{attrs:{d:"M4.957 0A4.964 4.964 0 000 4.96v7.083A4.964 4.964 0 004.96 17h7.083A4.964 4.964 0 0017 12.04V4.957A4.964 4.964 0 0012.04 0H4.957zm8.501 2.833a.709.709 0 110 1.418.709.709 0 010-1.418zM8.5 4.25a4.254 4.254 0 014.25 4.25 4.254 4.254 0 01-4.25 4.25A4.254 4.254 0 014.25 8.5 4.254 4.254 0 018.5 4.25zm0 1.417a2.833 2.833 0 100 5.666 2.833 2.833 0 000-5.666z"}})]),a("symbol",{attrs:{id:"icon-minus",viewBox:"0 0 9 3"}},[a("path",{attrs:{d:"M8.287 2.574H.7V.765h7.587v1.809z"}})]),a("symbol",{attrs:{id:"icon-plus",viewBox:"0 0 12 12"}},[a("path",{attrs:{d:"M6.524 11.086h-1.43v-4.51H.54V5.102h4.554V.57h1.43v4.532h4.554v1.474H6.524v4.51z"}})]),a("symbol",{attrs:{id:"icon-search",viewBox:"0 0 20 20"}},[a("path",{attrs:{"clip-rule":"evenodd",d:"M13.224 3.097A7.16 7.16 0 113.097 13.224 7.16 7.16 0 0113.224 3.097zm.728 10.813a8.16 8.16 0 10-.042.042l-.7.7 5.049 5.05a1.02 1.02 0 101.442-1.443l-5.049-5.05-.7.7z"}})]),a("symbol",{attrs:{id:"icon-telegram",viewBox:"0 0 19 17"}},[a("path",{attrs:{d:"M.393 7.855l4.324 1.614 1.674 5.383a.509.509 0 00.809.243l2.41-1.965a.72.72 0 01.877-.024l4.348 3.156a.51.51 0 00.798-.308L18.818.634a.51.51 0 00-.682-.58L.388 6.902a.51.51 0 00.005.954zm5.729.755l8.451-5.206c.152-.093.308.112.178.233l-6.975 6.484a1.446 1.446 0 00-.448.865l-.238 1.76c-.031.236-.362.26-.426.032L5.75 9.567a.851.851 0 01.372-.957z"}})]),a("symbol",{attrs:{id:"icon-twitter",viewBox:"0 0 18 15"}},[a("path",{attrs:{d:"M17.062 2.007a7.009 7.009 0 01-2.01.55A3.51 3.51 0 0016.59.62a6.989 6.989 0 01-2.222.85 3.5 3.5 0 00-5.965 3.194 9.94 9.94 0 01-7.215-3.659c-.3.519-.473 1.12-.473 1.76a3.5 3.5 0 001.557 2.914 3.492 3.492 0 01-1.586-.438v.045a3.502 3.502 0 002.808 3.432 3.526 3.526 0 01-1.58.06 3.502 3.502 0 003.27 2.43A7.025 7.025 0 010 12.659a9.9 9.9 0 005.365 1.574c6.44 0 9.96-5.334 9.96-9.96 0-.15-.004-.302-.01-.452a7.116 7.116 0 001.745-1.81l.002-.003z"}})]),a("symbol",{attrs:{id:"icon-vk",viewBox:"0 0 20 11"}},[a("path",{attrs:{"clip-rule":"evenodd",d:"M19.541.745c.14-.43 0-.745-.662-.745h-2.188c-.556 0-.812.273-.951.573 0 0-1.113 2.512-2.69 4.143-.51.473-.741.623-1.02.623-.138 0-.347-.15-.347-.58V.745c0-.515-.154-.745-.618-.745H7.627c-.348 0-.557.24-.557.466 0 .488.788.6.87 1.975v2.984c0 .654-.128.773-.406.773-.742 0-2.546-2.523-3.617-5.41C3.707.227 3.497 0 2.938 0H.75C.125 0 0 .273 0 .573c0 .537.742 3.199 3.454 6.72C5.262 9.696 7.809 11 10.127 11c1.391 0 1.563-.29 1.563-.788V8.395c0-.58.132-.695.572-.695.325 0 .881.15 2.18 1.31 1.483 1.374 1.727 1.99 2.562 1.99h2.188c.625 0 .938-.29.757-.86-.197-.57-.905-1.396-1.845-2.375-.51-.558-1.275-1.16-1.507-1.46-.324-.387-.232-.558 0-.902 0 0 2.666-3.477 2.944-4.658z"}})])])]),a("header",{staticClass:"header container"},[a("div",{staticClass:"header__wrapper"},[a("span",{staticClass:"header__info"},[t._v("Каталог")]),a("router-link",{staticClass:"header__logo",attrs:{tag:"a",to:{name:"main"}}},[a("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})]),a("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),a("BasketLink")],1)]),a("router-view"),a("footer",{staticClass:"footer container"},[a("div",{staticClass:"footer__wrapper"},[t._m(0),a("ul",{staticClass:"footer__social social"},[a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[a("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[a("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[a("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[a("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),a("li",{staticClass:"social__item"},[a("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[a("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),a("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(1),a("span",{staticClass:"footer__copyright"},[t._v(" © 2022 Moire ")])])])],1)},o=[function(){var t=this,a=t._self._c;return a("ul",{staticClass:"footer__links"},[a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Каталог ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@technozavrrr.com"}},[t._v(" hi@moire.com ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])]),a("li",[a("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])])},function(){var t=this,a=t._self._c;return a("ul",{staticClass:"footer__data"},[a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),a("li",[a("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],l=function(){var t=this,a=t._self._c;return a("router-link",{staticClass:"header__cart",attrs:{tag:"a",to:{name:"basket"},"aria-label":"Корзина с товарами"}},[a("svg",{attrs:{width:"19",height:"24"}},[a("use",{attrs:{"xlink:href":"#icon-cart"}})]),a("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(this.$store.state.cartProducts.length))])])},c=[],n=e(1656),u={},d=(0,n.A)(u,l,c,!1,null,null,null),_=d.exports,m=e(3518),p={components:{BasketLink:_},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:{...(0,m.i0)(["loadCart"]),...(0,m.PY)(["updateUserAccessKey"])}},h=p,v=(0,n.A)(h,i,o,!1,null,null,null),f=v.exports,C=e(6178),g=function(){var t=this,a=t._self._c;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Каталог ")]),t.productData?a("span",{staticClass:"content__info"},[t._v(" "+t._s(t.productData.pagination.total)+" "+t._s(t.Pluralize(t.productData.pagination.total))+" ")]):t._e()])]),a("div",{staticClass:"content__catalog"},[a("FilterBar",{attrs:{"min-price":t.minPrice,"max-price":t.maxPrice,"color-ids":t.colorIds,"material-ids":t.materialIds,"season-ids":t.seasonIds,"category-ids":t.categoryIds},on:{"update:minPrice":function(a){t.minPrice=a},"update:min-price":function(a){t.minPrice=a},"update:maxPrice":function(a){t.maxPrice=a},"update:max-price":function(a){t.maxPrice=a},"update:colorIds":function(a){t.colorIds=a},"update:color-ids":function(a){t.colorIds=a},"update:materialIds":function(a){t.materialIds=a},"update:material-ids":function(a){t.materialIds=a},"update:seasonIds":function(a){t.seasonIds=a},"update:season-ids":function(a){t.seasonIds=a},"update:categoryIds":function(a){t.categoryIds=a},"update:category-ids":function(a){t.categoryIds=a}}}),a("section",{staticClass:"catalog"},[t.productsLoading?a("div",{staticClass:"lds-ellipsis"},[a("div"),a("div"),a("div"),a("div")]):t._e(),t.productsLoadingFailed?a("div",[t._v("Произошла ошибка при загрузки товаров "),a("button",{on:{click:function(a){return a.preventDefault(),t.updateAllProducts.apply(null,arguments)}}},[t._v("Попробовать ещё раз")])]):t._e(),t.productData?a("ProductList",{attrs:{products:t.productData.items}}):t._e(),a("BasePagination",{attrs:{total:t.total,"per-page":t.limit},model:{value:t.page,callback:function(a){t.page=a},expression:"page"}})],1)],1)])},b=[];const y="https://vue-moire.skillbox.cc";var k=e(788),P=e.n(k),I=function(){var t=this,a=t._self._c;return a("ul",{staticClass:"catalog__pagination pagination"},[a("li",{staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1===t.page},attrs:{"aria-label":"Предыдущая страница"},on:{click:function(a){return a.preventDefault(),t.changePage(t.page-1)}}},[a("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.total,(function(e){return a("li",{key:e,staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link",class:{"pagination__link--current":e===t.page},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(" "+t._s(e)+" ")])])})),a("li",{staticClass:"pagination__item"},[a("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===t.total},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(a){return a.preventDefault(),t.changePage(t.page+1)}}},[a("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},x=[],A={model:{prop:"page",event:"paginate"},props:{page:Number,total:Number,perPage:Number},methods:{changePage(t){t<=this.total&&t>0&&this.$emit("paginate",t)}},computed:{amountPages(){return Math.ceil(this.total/this.perPage)}}},w=A,D=(0,n.A)(w,I,x,!1,null,null,null),T=D.exports,F=function(){var t=this,a=t._self._c;return a("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return a("ProductItem",{key:t.title,attrs:{product:t}})})),1)},$=[],L=function(){var t=this,a=t._self._c;return a("li",{staticClass:"catalog__item"},[a("router-link",{staticClass:"catalog__pic",attrs:{tag:"a",to:{name:"product",params:{id:t.product.id}}}},[a("img",{attrs:{src:t.changeProduct(),alt:t.product.title}})]),a("h3",{staticClass:"catalog__title"},[a("router-link",{attrs:{tag:"a",to:{name:"product"}}},[t._v(" "+t._s(t.product.title)+" ")])],1),a("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t._f("NumberFormat")(t.product.price))+" ₽ ")]),a("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(e,s){return a("li",{key:e.color.code,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.activeImage,expression:"activeImage",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-1"},domProps:{value:s,checked:t._q(t.activeImage,t._n(s))},on:{change:function(a){t.activeImage=t._n(s)}}}),a("span",{staticClass:"colors__value",style:{backgroundColor:e.color.code}})])])})),0)],1)},S=[];function N(t){return(new Intl.NumberFormat).format(t)}var z={data(){return{activeImage:0}},filters:{NumberFormat:N},props:{product:Object},methods:{changeProduct(){return 14!==this.product.id?this.product.colors[this.activeImage].gallery[0].file.url:this.product.colors[this.activeImage+1].gallery[0].file.url}}},M=z,O=(0,n.A)(M,L,S,!1,null,null,null),B=O.exports,K={components:{ProductItem:B},props:{products:Array}},V=K,E=(0,n.A)(V,F,$,!1,null,null,null),q=E.exports,H=(e(1454),function(){var t=this,a=t._self._c;return a("aside",{staticClass:"filter"},[a("form",{staticClass:"filter__form form",attrs:{action:"#"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цена")]),a("label",{staticClass:"form__label form__label--price"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.priceFrom,expression:"priceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.priceFrom},on:{input:function(a){a.target.composing||(t.priceFrom=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),a("span",{staticClass:"form__value"},[t._v("От")])]),a("label",{staticClass:"form__label form__label--price"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.priceTo,expression:"priceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.priceTo},on:{input:function(a){a.target.composing||(t.priceTo=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),a("span",{staticClass:"form__value"},[t._v("До")])])]),t.currentCategories?a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Категория")]),a("label",{staticClass:"form__label form__label--select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.category,expression:"category",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(a){var e="_value"in a?a._value:a.value;return t._n(e)}));t.category=a.target.multiple?e:e[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.currentCategories.items,(function(e){return a("option",{key:e.title,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])}))],2)])]):t._e(),t.currentColors?a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цвет")]),a("ul",{staticClass:"colors"},t._l(t.currentColors.items,(function(e){return a("li",{key:e.id,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.colors,expression:"colors"}],staticClass:"colors__radio sr-only",attrs:{type:"checkbox",name:"color"},domProps:{value:e.id,checked:Array.isArray(t.colors)?t._i(t.colors,e.id)>-1:t.colors},on:{change:[function(a){var s=t.colors,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e.id,l=t._i(s,o);r.checked?l<0&&(t.colors=s.concat([o])):l>-1&&(t.colors=s.slice(0,l).concat(s.slice(l+1)))}else t.colors=i},function(a){return t.changeColors(t.season.id)}]}}),a("span",{staticClass:"colors__value",style:{backgroundColor:e.code}})])])})),0)]):t._e(),t.currentMaterials?a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Материал")]),a("ul",{staticClass:"check-list"},t._l(t.currentMaterials.items,(function(e){return a("li",{key:e.title,staticClass:"check-list__item"},[a("label",{staticClass:"check-list__label"},[a("input",{staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material",seasons:"materials"},domProps:{value:e.id}}),a("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),a("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]):t._e(),t.currentSeasons?a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),a("ul",{staticClass:"check-list"},t._l(t.currentSeasons.items,(function(e){return a("li",{key:e.title,staticClass:"check-list__item"},[a("label",{staticClass:"check-list__label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.seasons,expression:"seasons"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection"},domProps:{value:e.id,checked:Array.isArray(t.seasons)?t._i(t.seasons,e.id)>-1:t.seasons},on:{change:function(a){var s=t.seasons,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e.id,l=t._i(s,o);r.checked?l<0&&(t.seasons=s.concat([o])):l>-1&&(t.seasons=s.slice(0,l).concat(s.slice(l+1)))}else t.seasons=i}}}),a("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(e.title)+" "),a("span",[t._v("("+t._s(e.productsCount)+")")])])])])})),0)]):t._e(),a("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.showReset,expression:"showReset"}],staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:t.reset}},[t._v(" Сбросить ")])])])}),j=[],U={props:{minPrice:Number,maxPrice:Number,colorIds:Array,materialIds:Array,seasonIds:Array,categoryIds:Number},data(){return{priceFrom:0,priceTo:0,currentCategories:null,currentMaterials:null,currentSeasons:null,currentColors:null,category:0,colors:[],materials:[],seasons:[]}},computed:{showReset(){return this.priceFrom||this.priceTo||this.category||this.materials.length||this.colors.length||this.seasons.length}},methods:{loadMaterials(){P().get(y+"/api/materials").then((t=>{this.currentMaterials=t.data}))},loadColors(){P().get(y+"/api/colors").then((t=>{this.currentColors=t.data}))},loadCategories(){return P().get(y+"/api/productCategories").then((t=>{this.currentCategories=t.data}))},loadSeasons(){return P().get(y+"/api/seasons").then((t=>{this.currentSeasons=t.data}))},submit(){this.$emit("update:minPrice",this.priceFrom),this.$emit("update:maxPrice",this.priceTo),this.$emit("update:colorIds",this.colors),this.$emit("update:materialIds",this.materials),this.$emit("update:seasonIds",this.seasons),this.$emit("update:categoryIds",this.category)},reset(){this.priceFrom=0,this.priceTo=0,this.category=0,this.colors=[],this.materials=[],this.seasons=[],this.$emit("update:minPrice",0),this.$emit("update:maxPrice",0),this.$emit("update:colorIds",0),this.$emit("update:materialIds",[]),this.$emit("update:seasonIds",[]),this.$emit("update:categoryIds",0)}},created(){this.loadCategories(),this.loadMaterials(),this.loadSeasons(),this.loadColors()}},R=U,Y=(0,n.A)(R,H,j,!1,null,null,null),G=Y.exports;function J(t){let a=t%100;if(a<=20){if(0===a||a>4&&a<=20)return"товаров";if(1===a)return"товар";if(a>1&&a<5)return"товара"}else{if(a%=10,0===a||a>4&&a<=9)return"товаров";if(1===a)return"товар";if(a>1&&a<5)return"товара"}return"товаров"}var Q={components:{BasePagination:T,ProductList:q,FilterBar:G},data(){return{productData:null,page:1,total:null,limit:3,minPrice:0,maxPrice:0,categoryIds:0,colorIds:[],materialIds:[],seasonIds:[],text:"товаров",productsLoading:!1,productsLoadingFailed:!1}},methods:{Pluralize(t){return J(t)},updateAllProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProducts),this.loadProducts=setTimeout((()=>{P().get(y+"/api/products",{params:{page:this.page,limit:this.limit,categoryId:this.categoryIds,materialIds:this.materialIds,seasonIds:this.seasonIds,colorIds:this.colorIds,minPrice:this.minPrice,maxPrice:this.maxPrice}}).then((t=>{this.productData=t.data,this.total=t.data.pagination.pages})).catch((()=>this.productsLoadingFailed=!0)).then((()=>{this.productsLoading=!1}))}),0)}},created(){this.updateAllProducts()},watch:{page(){this.updateAllProducts()},minPrice(){this.updateAllProducts()},maxPrice(){this.updateAllProducts()},colorIds(){this.updateAllProducts()},categoryIds(){this.updateAllProducts()},materialIds(){this.updateAllProducts()},seasonIds(){this.updateAllProducts()}}},W=Q,X=(0,n.A)(W,g,b,!1,null,null,null),Z=X.exports,tt=function(){var t=this,a=t._self._c;return t.productLoadingFailed?a("main",{staticClass:"content container"},[t._v("Ошибка загрузки")]):t.productLoading?a("main",{staticClass:"content container"},[t._m(0)]):a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{tag:"a",to:{name:"main"}}},[t._v(" Каталог ")])],1),a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{tag:"a",to:{name:"main"}}},[t._v(" "+t._s(t.productsData.category.title)+" ")])],1),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.productsData.title)+" ")])])])]),a("section",{staticClass:"item"},[a("div",{staticClass:"item__pics pics"},[a("div",{staticClass:"pics__wrapper"},[a("img",{attrs:{width:"570",height:"570",src:t.activeImg,alt:t.productsData.title}})]),a("ul",{staticClass:"pics__list"},t._l(t.productsData.colors,(function(e){return a("li",{key:e.gallery[0].file.name,staticClass:"pics__item",on:{click:function(a){return a.preventDefault(),t.changeActiveImg(e.gallery[0].file.url)}}},[a("a",{staticClass:"pics__link",class:{"pics__link--current":e.gallery[0].file.url===t.activeImg},attrs:{href:""}},[a("img",{attrs:{width:"98",height:"98",src:e.gallery[0].file.url,alt:t.productsData.title}})])])})),0)]),a("div",{staticClass:"item__info"},[a("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.productsData.id))]),a("h2",{staticClass:"item__title"},[t._v(" "+t._s(t.productsData.title)+" ")]),a("div",{staticClass:"item__form"},[a("form",{staticClass:"form",attrs:{action:"#",method:"POST"}},[a("FormCounter",{attrs:{count:t.amount},on:{"update:count":function(a){t.amount=a}}}),a("div",{staticClass:"item__row"},[a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Цвет")]),a("ul",{staticClass:"colors colors--black"},t._l(t.productsData.colors,(function(e){return a("li",{key:e.color.code,staticClass:"colors__item"},[a("label",{staticClass:"colors__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productColor,expression:"productColor",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item",checked:""},domProps:{value:e.color.id,checked:t._q(t.productColor,t._n(e.color.id))},on:{change:function(a){t.productColor=t._n(e.color.id)}}}),a("span",{staticClass:"colors__value",style:{backgroundColor:e.color.code}})])])})),0)]),a("fieldset",{staticClass:"form__block"},[a("legend",{staticClass:"form__legend"},[t._v("Размер")]),a("label",{staticClass:"form__label form__label--small form__label--select"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.productSize,expression:"productSize",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(a){var e="_value"in a?a._value:a.value;return t._n(e)}));t.productSize=a.target.multiple?e:e[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Размер")]),t._l(t.productsData.sizes,(function(e){return a("option",{key:e.title,domProps:{value:e.id}},[t._v(t._s(e.title))])}))],2)])])]),a("button",{staticClass:"item__button button button--primery",attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.addToCart.apply(null,arguments)}}},[t._v(" В корзину ")])],1),t.productAdded?a("div",[t._v("Товар добавлен в корзину")]):t.productAddSending?a("div",[t._v("Товар добавляется в корзину")]):t.productAddFail.colorId?a("div",[t._v(t._s(t.productAddFail.colorId))]):t.productAddFail.sizeId?a("div",[t._v(t._s(t.productAddFail.sizeId))]):t._e()])]),t._m(1)])])},at=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"lds-ellipsis"},[a("div"),a("div"),a("div"),a("div")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"item__desc"},[a("ul",{staticClass:"tabs"},[a("li",{staticClass:"tabs__item"},[a("a",{staticClass:"tabs__link tabs__link--current"},[t._v(" Информация о товаре ")])]),a("li",{staticClass:"tabs__item"},[a("a",{staticClass:"tabs__link",attrs:{href:"#"}},[t._v(" Доставка и возврат ")])])]),a("div",{staticClass:"item__content"},[a("h3",[t._v("Состав:")]),a("p",[t._v(" 60% хлопок"),a("br"),t._v(" 30% полиэстер"),a("br")]),a("h3",[t._v("Уход:")]),a("p",[t._v(" Машинная стирка при макс. 30ºC короткий отжим"),a("br"),t._v(" Гладить при макс. 110ºC"),a("br"),t._v(" Не использовать машинную сушку"),a("br"),t._v(" Отбеливать запрещено"),a("br"),t._v(" Не подвергать химчистке"),a("br")])])])}],et=function(){var t=this,a=t._self._c;return a("div",{staticClass:"item__row item__row--center"},[a("div",{staticClass:"form__counter"},[a("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(a){a.preventDefault(),t.amount>1&&t.amount--}}},[a("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-minus"}})])]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.amount},on:{input:function(a){a.target.composing||(t.amount=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),a("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(a){a.preventDefault(),t.amount++}}},[a("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-plus"}})])])])])},st=[],rt={props:{count:Number},name:"FormCounter",computed:{amount:{get(){return this.count},set(t){("string"===typeof t||t<1)&&(t=1),this.$emit("update:count",t)}}}},it=rt,ot=(0,n.A)(it,et,st,!1,null,null,null),lt=ot.exports,ct={components:{FormCounter:lt},data(){return{productsData:null,activeImg:null,amount:1,productColor:0,productSize:0,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1,productAddFail:{}}},methods:{...(0,m.i0)(["addProductToCart"]),addToCart(){this.productAddFail=null,this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:Number(this.$route.params.id),amount:this.amount,color:this.productColor,size:this.productSize}).then((()=>{this.productAddSending=!1,this.productAdded=!0})).catch((t=>{this.productAddSending=!1,this.productAddFail=t.response.data.error.request}))},loadProducts(){this.productLoading=!0,this.productLoadingFailed=!1,P().get(y+`/api/products/${this.$route.params.id}`).then((t=>{this.productsData=t.data,this.activeImg=this.productsData.colors[0].gallery[0].file.url})).catch((()=>{this.productLoadingFailed=!0})).then((()=>{this.productLoading=!1}))},changeActiveImg(t){this.activeImg=t}},created(){this.loadProducts()}},nt=ct,ut=(0,n.A)(nt,tt,at,!1,null,null,null),dt=ut.exports,_t=function(){var t=this,a=t._self._c;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0)]),a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Корзина ")]),a("span",{staticClass:"content__info"},[t._v(" "+t._s(this.$store.state.cartProducts.length)+" "+t._s(t.Pluralize(this.$store.state.cartProducts.length))+" ")])])]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("ul",{staticClass:"cart__list"},t._l(this.$store.state.cartProductsData,(function(t){return a("CartItem",{key:t.id,attrs:{product:t}})})),1)]),a("div",{staticClass:"cart__block"},[a("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),a("p",{staticClass:"cart__price"},[t._v(" Итого: "),a("span",[t._v(t._s(t.totalPrice)+" ₽")])]),a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.cartProductsData.length,expression:"$store.state.cartProductsData.length"}],staticClass:"cart__button button button--primery",attrs:{tag:"button",to:{name:"order"},type:"submit"}},[t._v(" Оформить заказ ")])],1)])])])},mt=[function(){var t=this,a=t._self._c;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])}],pt=function(){var t=this,a=t._self._c;return a("li",{staticClass:"cart__item product"},[a("div",{staticClass:"product__pic"},[a("img",{attrs:{src:t.product.color.gallery[0].file.url,width:"120",height:"120",alt:"Название товара"}})]),a("h3",{staticClass:"product__title"},[t._v(" "+t._s(t.product.product.title)+" ")]),a("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),a("span",[a("i",{style:{backgroundColor:t.product.color.color.code}}),t._v(" "+t._s(t.product.color.color.title)+" ")])]),a("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.product.product.id)+" ")]),a("FormCounter",{attrs:{count:t.amount},on:{"update:count":function(a){t.amount=a}}}),a("b",{staticClass:"product__price"},[t._v(" "+t._s(t._f("NumberFormat")(t.product.price*t.product.quantity))+" ₽ ")]),a("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(a){return a.preventDefault(),t.deleteProduct(t.product.id)}}},[a("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[a("use",{attrs:{"xlink:href":"#icon-close"}})])])],1)},ht=[],vt={props:{product:Object},components:{FormCounter:lt},filters:{NumberFormat:N},computed:{amount:{get(){return this.product.quantity},set(t){this.$store.dispatch("updateCartProductAmount",{productId:this.product.id,amount:t})}}},methods:{...(0,m.i0)({deleteProduct:"updateDeleteCartProduct"})}},ft=vt,Ct=(0,n.A)(ft,pt,ht,!1,null,null,null),gt=Ct.exports,bt={components:{CartItem:gt},methods:{Pluralize(t){return J(t)}},computed:{...(0,m.L8)({totalPrice:"cartTotalPrice"})}},yt=bt,kt=(0,n.A)(yt,_t,mt,!1,null,null,null),Pt=kt.exports,It=function(){var t=this,a=t._self._c;return a("h1",[t._v("Страница не найдена")])},xt=[],At={},wt=(0,n.A)(At,It,xt,!1,null,null,null),Dt=wt.exports,Tt=function(){var t=this,a=t._self._c;return a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{tag:"a",to:{name:"main"}}},[t._v(" Каталог ")])],1),a("li",{staticClass:"breadcrumbs__item"},[a("router-link",{staticClass:"breadcrumbs__link",attrs:{tag:"a",to:{name:"basket"}}},[t._v(" Корзина ")])],1),t._m(0)]),t._m(1)]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(a){return a.preventDefault(),t.order.apply(null,arguments)}}},[a("div",{staticClass:"cart__field"},[a("div",{staticClass:"cart__data"},[a("BaseFormText",{attrs:{error:t.formError.name,title:"ФИО",placeholder:"Введите ваше полное имя",type:"text"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}}),a("BaseFormText",{attrs:{error:t.formError.address,title:"Адрес доставки",placeholder:"Введите ваш адрес",type:"text"},model:{value:t.formData.address,callback:function(a){t.$set(t.formData,"address",a)},expression:"formData.address"}}),a("BaseFormText",{attrs:{error:t.formError.phone,title:"Телефон",placeholder:"Введите ваш телефон",type:"tel"},model:{value:t.formData.phone,callback:function(a){t.$set(t.formData,"phone",a)},expression:"formData.phone"}}),a("BaseFormText",{attrs:{error:t.formError.email,title:"Email",placeholder:"Введите ваш Email",type:"email"},model:{value:t.formData.email,callback:function(a){t.$set(t.formData,"email",a)},expression:"formData.email"}}),a("BaseFormTextArea",{attrs:{error:t.formError.comment,title:"Комментарий к заказу",placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(a){t.$set(t.formData,"comment",a)},expression:"formData.comment"}})],1),a("div",{staticClass:"cart__options"},[a("h3",{staticClass:"cart__title"},[t._v("Доставка")]),a("ul",{staticClass:"cart__options options"},[a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.deliveryType,expression:"deliveryType",modifiers:{number:!0}}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"1"},domProps:{checked:t._q(t.deliveryType,t._n("1"))},on:{change:function(a){t.deliveryType=t._n("1")}}}),t._m(2)])]),a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.deliveryType,expression:"deliveryType",modifiers:{number:!0}}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"2"},domProps:{checked:t._q(t.deliveryType,t._n("2"))},on:{change:function(a){t.deliveryType=t._n("2")}}}),t._m(3)])])]),a("h3",{staticClass:"cart__title"},[t._v("Оплата")]),a("ul",{staticClass:"cart__options options"},[a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.paymentType,expression:"paymentType",modifiers:{number:!0}}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"1"},domProps:{checked:t._q(t.paymentType,t._n("1"))},on:{change:function(a){t.paymentType=t._n("1")}}}),a("span",{staticClass:"options__value"},[t._v(" Картой при получении ")])])]),a("li",{staticClass:"options__item"},[a("label",{staticClass:"options__label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.paymentType,expression:"paymentType",modifiers:{number:!0}}],staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"2"},domProps:{checked:t._q(t.paymentType,t._n("2"))},on:{change:function(a){t.paymentType=t._n("2")}}}),a("span",{staticClass:"options__value"},[t._v(" Наличными при получении ")])])])])])]),a("OrderList",{attrs:{products:t.orderListInfo()}},[a("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"}},[t._v(" Оформить заказ ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.formLoading,expression:"formLoading"}]},[t._v("Загрузка товаров...")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.formErrorMessage,expression:"formErrorMessage"}],staticClass:"cart__error form__error-block"},[a("h4",[t._v("Заявка не отправлена!")]),a("p",[t._v(" "+t._s(t.formErrorMessage)+" ")])])],1)])])},Ft=[function(){var t=this,a=t._self._c;return a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"content__row"},[a("h1",{staticClass:"content__title"},[t._v(" Оформление заказа ")])])},function(){var t=this,a=t._self._c;return a("span",{staticClass:"options__value"},[t._v(" Самовывоз "),a("b",[t._v("бесплатно")])])},function(){var t=this,a=t._self._c;return a("span",{staticClass:"options__value"},[t._v(" Курьером "),a("b",[t._v("290 ₽")])])}],$t=(e(4114),function(){var t=this,a=t._self._c;return a("BaseFormField",{attrs:{title:t.title,error:t.error}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input form__input--area",attrs:{placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(a){a.target.composing||(t.dataValue=a.target.value)}}})])}),Lt=[],St=function(){var t=this,a=t._self._c;return a("label",{staticClass:"form__label"},[t._t("default"),a("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?a("span",{staticClass:"form__error"},[t._v(t._s(t.error))]):t._e()],2)},Nt=[],zt={props:{title:String,error:String}},Mt=zt,Ot=(0,n.A)(Mt,St,Nt,!1,null,null,null),Bt=Ot.exports,Kt={props:{title:String,error:String,placeholder:String,value:String},components:{BaseFormField:Bt},computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},Vt=Kt,Et=(0,n.A)(Vt,$t,Lt,!1,null,null,null),qt=Et.exports,Ht=function(){var t=this,a=t._self._c;return a("BaseFormField",{attrs:{title:t.title,error:t.error}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(a){a.target.composing||(t.dataValue=a.target.value)}}})])},jt=[],Ut={props:{title:String,error:String,placeholder:String,value:String},components:{BaseFormField:Bt},computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},Rt=Ut,Yt=(0,n.A)(Rt,Ht,jt,!1,null,null,null),Gt=Yt.exports,Jt=function(){var t=this,a=t._self._c;return a("div",{staticClass:"cart__block"},[a("ul",{staticClass:"cart__orders"},t._l(this.products.items,(function(e){return a("li",{key:e.product.title,staticClass:"cart__order"},[a("h3",[t._v(t._s(e.product.title))]),a("b",[t._v(t._s(t._f("NumberFormat")(e.product.price*e.quantity))+" ₽")]),a("span",[t._v("Артикул: "+t._s(e.product.id))])])})),0),a("div",{staticClass:"cart__total"},[1===t.products.delivery?a("p",[t._v("Доставка: "),a("b",[t._v("бесплатно")])]):a("p",[t._v("Доставка: "),a("b",[t._v("290 ₽")])]),1===t.products.delivery?a("p",[t._v("Итого: "),a("b",[t._v(t._s(t.products.length))]),t._v(" товара на сумму "),a("b",[t._v(t._s(t._f("NumberFormat")(t.products.totalPrice))+" ₽")])]):a("p",[t._v("Итого: "),a("b",[t._v(t._s(t.products.length))]),t._v(" товара на сумму "),a("b",[t._v(t._s(t._f("NumberFormat")(t.products.totalPrice+290))+" ₽")])])]),t._t("default")],2)},Qt=[],Wt={props:{products:Object},filters:{NumberFormat:s.numberFormat}},Xt=Wt,Zt=(0,n.A)(Xt,Jt,Qt,!1,null,null,null),ta=Zt.exports,aa={data(){return{deliveryType:1,paymentType:1,formData:{},formError:{},formErrorMessage:"",formLoading:!1}},components:{BaseFormTextArea:qt,BaseFormText:Gt,OrderList:ta},computed:{...(0,m.L8)({totalPrice:"cartTotalPrice"})},methods:{orderListInfo(){return{items:{...this.$store.state.cartProductsData},totalPrice:this.totalPrice,delivery:this.deliveryType}},order(){this.formError={},this.formErrorMessage="",this.formLoading=!0,P().post(y+"/api/orders",{...this.formData,deliveryTypeId:this.deliveryType,paymentTypeId:this.paymentType},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.formLoading=!1,this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}})})).catch((t=>{this.formLoading=!1,this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message}))}}},ea=aa,sa=(0,n.A)(ea,Tt,Ft,!1,null,null,null),ra=sa.exports,ia=function(){var t=this,a=t._self._c;return a("div",[this.$store.state.orderInfo?a("main",{staticClass:"content container"},[a("div",{staticClass:"content__top"},[t._m(1),a("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),a("span",[t._v("№ "+t._s(this.$store.state.orderInfo.id))])])]),a("section",{staticClass:"cart"},[a("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[a("div",{staticClass:"cart__field"},[a("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),a("ul",{staticClass:"dictionary"},[a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.name)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.address)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.phone)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.email)+" ")])]),a("li",{staticClass:"dictionary__item"},[a("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),a("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.paymentType)+" ")])])])]),a("OrderList",{attrs:{products:t.orderListInfo()}})],1)])]):a("main",{staticClass:"content container"},[t._m(0)]),this.$store.state.orderInfoError?a("main",{staticClass:"content container"},[a("h1",[t._v("Страница не найдена")])]):t._e()])},oa=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"lds-ellipsis"},[a("div"),a("div"),a("div"),a("div")])},function(){var t=this,a=t._self._c;return a("ul",{staticClass:"breadcrumbs"},[a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link",attrs:{href:"cart.html"}},[t._v(" Корзина ")])]),a("li",{staticClass:"breadcrumbs__item"},[a("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])])}],la={created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)},components:{OrderList:ta},methods:{orderListInfo(){return{items:{...this.$store.state.orderInfo.basket.items},totalPrice:this.$store.state.orderInfo.totalPrice,delevery:this.$store.state.orderInfo.deliveryType.id}}}},ca=la,na=(0,n.A)(ca,ia,oa,!1,null,null,null),ua=na.exports;r.Ay.use(C.Ay);const da=[{path:"/",name:"main",component:Z},{path:"/product/:id",name:"product",component:dt},{path:"/cart-product/",name:"basket",component:Pt},{path:"/order",name:"order",component:ra},{path:"/order/:id",name:"orderInfo",component:ua},{path:"*",name:"NotFoundPage",component:Dt}],_a=new C.Ay({routes:da});var ma=_a;e(8992),e(4520);r.Ay.use(m.Ay);var pa=new m.Ay.Store({state:{userAccessKey:null,cartProductsData:[],cartProducts:[],lastInfo:null,orderInfo:null,orderInfoError:null},getters:{cartTotalPrice(t,a){let e=0;for(const s of t.cartProductsData)e+=s.price*s.quantity;return e}},mutations:{updateOrderInfo(t,a){t.orderInfo=a},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},deleteCartProduct(t,a){t.lastInfo=t.cartProducts,t.cartProducts=t.cartProducts.filter((t=>t.id!==a))},updateUserAccessKey(t,a){t.userAccessKey=a},updateCartProductsData(t,a){t.cartProductsData=a},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity,color:t.color.color,size:t.size,id:t.id})))}},actions:{loadOrderInfo(t,a){return P().get(y+"/api/orders/"+a,{params:{userAccessKey:t.state.userAccessKey}}).then((a=>{t.commit("updateOrderInfo",a.data)})).catch((()=>{t.state.orderInfoError=!0}))},updateCartProductAmount(t,{productId:a,amount:e}){if(!(e<1))return P().put(y+"/api/baskets/products",{basketItemId:a,quantity:e},{params:{userAccessKey:t.state.userAccessKey}}).then((a=>{t.commit("updateCartProductsData",a.data.items)})).catch((()=>{t.commit("syncCartProducts")}))},loadCart(t){return P().get(y+"/api/baskets",{params:{userAccessKey:t.state.userAccessKey}}).then((a=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",a.data.user.accessKey),t.commit("updateUserAccessKey",a.data.user.accessKey)),t.commit("updateCartProductsData",a.data.items),t.commit("syncCartProducts")}))},addProductToCart(t,{productId:a,amount:e,color:s,size:r}){return P().post(y+"/api/baskets/products",{productId:a,colorId:s,sizeId:r,quantity:e},{params:{userAccessKey:t.state.userAccessKey}}).then((a=>{t.commit("updateCartProductsData",a.data.items),t.commit("syncCartProducts")}))},updateDeleteCartProduct(t,a){t.commit("deleteCartProduct",a),P()["delete"](y+`/api/baskets/products?userAccessKey=${t.state.userAccessKey}`,{data:{basketItemId:String(a)}}).catch((()=>{t.state.commit("syncCartProducts")})).then((()=>{t.state.cartProductsData=t.state.cartProducts.filter((t=>t.id!==a))}))}}});r.Ay.config.productionTip=!1,new r.Ay({router:ma,store:pa,render:t=>t(f)}).$mount("#app")}},a={};function e(s){var r=a[s];if(void 0!==r)return r.exports;var i=a[s]={exports:{}};return t[s].call(i.exports,i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(a,s,r,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],i=t[u][2];for(var l=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(e.O).every((function(t){return e.O[t](s[c])}))?s.splice(c--,1):(l=!1,i<o&&(o=i));if(l){t.splice(u--,1);var n=r();void 0!==n&&(a=n)}}return a}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,r,i]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(a){return 0===t[a]};var a=function(a,s){var r,i,o=s[0],l=s[1],c=s[2],n=0;if(o.some((function(a){return 0!==t[a]}))){for(r in l)e.o(l,r)&&(e.m[r]=l[r]);if(c)var u=c(e)}for(a&&a(s);n<o.length;n++)i=o[n],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(u)},s=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(1629)}));s=e.O(s)})();
//# sourceMappingURL=app.0943e9fc.js.map